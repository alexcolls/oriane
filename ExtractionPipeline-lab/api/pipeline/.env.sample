# ────────── K8S CONFIG ──────────
CLUSTER_NAME=oriane-pipeline-api-cluster
EKS_VERSION=1.33
CLUSTER_ROLE_NAME=AmazonEKSAutoNodeRole
NODE_ROLE_NAME=AmazonEKSAutoNodeRole
CLUSTER_POLICY_NAME=Standard
NODE_POLICY_NAME=YourNodePolicyName
AMI_FAMILY=AmazonLinux2023
CPU_INSTANCE_TYPES=c6g.large,c6g.xlarge,c6g.2xlarge
GPU_INSTANCE_TYPES=g5.xlarge,g5.2xlarge,g4dn.xlarge,g4dn.2xlarge
GPU_NODE_GROUP_NAME=oriane-pipeline-worker-gpu-node
CPU_NODE_GROUP_NAME=oriane-pipeline-api-cpu-node
GPU_MIN_NODES=0
GPU_MAX_NODES=5
GPU_DESIRED_NODES=1
CPU_MIN_NODES=2
CPU_MAX_NODES=10
CPU_DESIRED_NODES=3
GPU_DISK_SIZE=200
CPU_DISK_SIZE=80

# ────────── ALB / Ingress ──────────
ALB_DOMAIN=
ALB_CERTIFICATE_ARN=
ALB_POLICY_ARN_FILE=deploy/alb-policy-arn.txt

# ────────── API CONFIG ──────────
API_NAME="Oriane Pipeline API"
API_VERSION=0.9.0
API_USERNAME=
API_PASSWORD=
API_KEY=
API_PORT=

# ────────── CORS TRUSTED ──────────
NUXT_APP_URL=https://dev.app.oriane.xyz/

# ────────── QDRANT (VECTOR DB) ──────────
QDRANT_URL=http://qdrant.admin.oriane.xyz:6333/
QDRANT_KEY=
QDRANT_COLLECTION=watched_frames
QDRANT_DIM=512

# ────────── AWS & S3 BUCKETS ──────────
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_VIDEOS_BUCKET=oriane-contents
S3_FRAMES_BUCKET=oriane-frames
S3_APP_BUCKET=oriane-app

# ────────── AURORA POSTGRESQL ──────────
DB_HOST=
DB_PORT=
DB_NAME=
DB_USER=
DB_PASSWORD=

# ────────── EXTRACTION PIPELINE CONFIG ──────────

# Path to the pipeline entrypoint script
PIPELINE_ENTRYPOINT=

# Absolute or relative; all will be created if missing.
VP_INPUT_DIR=videos_raw # for local testing
VP_OUTPUT_DIR=.output
VP_TMP_DIR=.output/tmp
VP_FRAMES_DIR=.output/tmp/frames
VP_LOGS_DIR=.output/logs
VP_REPORTS_DIR=.output/reports

# ────────── PERFORMANCE KNOBS ──────────
VP_MAX_WORKERS=4
VP_BATCH_SIZE=8
VP_SAMPLE_FPS=0.1

# ────────── OPTIONAL STEPS ──────────
VP_ENABLE_CROP=1
VP_ENABLE_DEDUP=1

# ────────── CROPPING PARAMS ──────────
VP_CROP_PROBES=3
VP_CROP_CLIP_SECS=2
VP_CROP_SAFE_MARGIN=4
VP_CROP_HWACCEL=cuda
VP_CROP_CROPDETECT=24:16:0
VP_CROP_ENCODER=h264_nvenc
VP_CROP_PRESET=p5
VP_CROP_TUNE=hq
VP_CROP_CQ=23
VP_MIN_CROP_RATIO=0.10
VP_DOWNSCALE=0.5

# ────────── OPENCV TUNING ──────────
VP_SCENE_THRESH=0.14
VP_MIN_FRAMES=3
VP_TOLERANCE=5
VP_EDGE_THRESH=10
VP_DHASH_SIZE=8
VP_SOLID_STD=5.0
VP_SOLID_MIN_DIM=10

# ────────── MODEL SELECTION ──────────
CLIP_MODEL=jinaai/jina-clip-v2
FORCE_CPU=0                   # 1=force CPU even if CUDA available, 0=use GPU if available

# ────────── LOCAL / DEV FLAGS ──────────
# Set LOCAL_MODE=1  ➜ skip all DB writes
# Set SKIP_UPLOAD=1 ➜ skip frame PNG uploads to S3
# Leave unset (or 0) for full production behaviour
LOCAL_MODE=0
SKIP_UPLOAD=0
